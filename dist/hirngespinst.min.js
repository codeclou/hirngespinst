/*!
 * @license MIT
 * Copyright (c) 2017 Bernhard Gr√ºnewaldt
 * https://github.com/codeclou/hirngespinst
 */
!function(e,t){if("function"==typeof define&&define.amd)define(["module","exports"],t);else if("undefined"!=typeof exports)t(module,exports);else{var a={exports:{}};t(a,a.exports),e.hirngespinst=a.exports}}(this,function(e,t){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),Hirngespinst=function(){function Hirngespinst(e){a(this,Hirngespinst);var t=this;t.initialState={tick:null,amountFrames:0,currentFrame:null,previousFrame:null,isPlaying:!0,manualPrevOrNextClick:!1,updateLock:!1,overallAnimationDurationInSeconds:0},t.state=n({},t.initialState),t.config=n({},{frameAnimationDurationInSeconds:8,framePauseBetweenFramesInSeconds:1,frameAutoHide:!1},e),t.fixTspanLeadingWhitespace(),t.preInitialize(),t.initializePlayPauseButtons(),t.initializePrevNextButtons(),setInterval(t.update,100,t,1)}return r(Hirngespinst,[{key:"update",value:function(e,t){null!==e.state.tick&&e.state.manualPrevOrNextClick===!1&&(e.state.tick=e.state.tick+1),null===e.state.tick&&(e.state.tick=24),e.state.updateLock===!1&&(e.state.tick%24==0&&e.state.isPlaying===!0||e.state.manualPrevOrNextClick===!0)&&(e.state.updateLock=!0,e.state.currentFrame=e.state.currentFrame+t,(e.state.isPlaying||e.state.manualPrevOrNextClick===!0)&&(e.state.currentFrame>e.state.amountFrames&&(e.resetAllFrames(),e.state.previousFrame=null,e.state.currentFrame=1),e.state.currentFrame<1&&(e.state.currentFrame=e.state.amountFrames),e.config.frameAutoHide===!0&&e.animateSingleFrame(e.state.previousFrame,"hide"),e.animateSingleFrame(e.state.currentFrame,"show"),e.updateFrameLabel()),e.state.previousFrame=e.state.currentFrame,e.state.manualPrevOrNextClick=!1,e.state.updateLock=!1)}},{key:"fixTspanLeadingWhitespace",value:function(){for(var e=document.getElementsByTagName("tspan"),t=void 0,a=0,n=e.length;a<n;a++){t=e[a];var r=t.textContent;if(void 0!==r&&null!==r&&/^\s/.test(r)){var i=r.replace(/^(\s*).*$/,"$1"),l=parseInt(t.getAttribute("x"),10)+5*i.length;t.setAttribute("x",l),t.textContent=r.substring(i.length,r.length)}}}},{key:"getElementsStartsWithId",value:function(e){for(var t=document.getElementsByTagName("*"),a=[],n=void 0,r=0,i=t.length;r<i;r++)n=t[r],n.id.substr(0,e.length)==e&&a.push(n);return a}},{key:"getFrameIdByNumber",value:function(e){return e<10?"frame-0"+e:"frame-"+e}},{key:"animateSingleFrame",value:function(e,t){var a=this,n=document.getElementById(a.getFrameIdByNumber(e));null!==n&&(n.removeAttribute("class"),setTimeout(function(e,t){"show"===t?(e.setAttribute("class","showFrameAnimation"),e.style.opacity=1):(e.setAttribute("class","hideFrameAnimation"),e.style.opacity=0)},200,n,t))}},{key:"updateFrameLabel",value:function(){var e=this,t=document.getElementById("hg-frame");if(null!==t){t.querySelector("tspan").textContent=e.state.currentFrame}}},{key:"initializePrevNextButtons",value:function(){var e=this,t=document.getElementById("hg-next");null!==t&&(t.onclick=function(){e.state.manualPrevOrNextClick=!0,e.update(e,1)});var a=document.getElementById("hg-prev");null!==a&&(a.onclick=function(){e.state.manualPrevOrNextClick=!0,e.update(e,-1)})}},{key:"resetAllFrames",value:function(){var e=this,t=e.getElementsStartsWithId("frame-");if(void 0!==t&&null!==t&&t.length>0)for(var a=0;a<t.length;a++)t[a].removeAttribute("class"),t[a].removeAttribute("style")}},{key:"resetAnimationCompletely",value:function(){var e=this;e.resetAllFrames(),e.state=n({},e.initialState),e.preInitialize(),e.update(e,1)}},{key:"initializePlayPauseButtons",value:function(){var e=this,t=document.getElementById("hg-play");null!==t&&(t.onclick=function(){e.state.isPlaying=!0});var a=document.getElementById("hg-pause");null!==a&&(a.onclick=function(){e.state.isPlaying=!1});var n=document.getElementById("hg-restart");null!==n&&(n.onclick=function(){e.resetAnimationCompletely()})}},{key:"preInitialize",value:function(){var e=this,t=e.getElementsStartsWithId("frame-");void 0!==t&&null!==t&&t.length>0&&(e.state.amountFrames=t.length),e.state.overallAnimationDurationInSeconds=(e.config.frameAnimationDurationInSeconds+e.config.framePauseBetweenFramesInSeconds)*e.state.amountFrames}}]),Hirngespinst}();t.default=Hirngespinst,e.exports=t.default});