/*!
 * @license MIT
 * Copyright (c) 2017 Bernhard Gr√ºnewaldt
 * https://github.com/codeclou/hirngespinst
 */
!function(e,t){if("function"==typeof define&&define.amd)define(["module","exports"],t);else if("undefined"!=typeof exports)t(module,exports);else{var n={exports:{}};t(n,n.exports),e.hirngespinst=n.exports}}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),Hirngespinst=function(){function Hirngespinst(e){n(this,Hirngespinst);var t=this;t.initialState={tick:null,amountFrames:0,currentFrame:null,previousFrame:null,isPlaying:!0,manualPrevOrNextClick:!1,updateLock:!1,overallAnimationDurationInSeconds:0},t.state=a({},t.initialState),t.config=a({},{frameAnimationDurationInSeconds:8,framePauseBetweenFramesInSeconds:1,frameAutoHide:!1},e),t.fixTspanLeadingWhitespace(),t.preInitialize(),t.initializePlayPauseButtons(),t.initializePrevNextButtons(),setInterval(t.update,100,t,1)}return r(Hirngespinst,[{key:"update",value:function(e,t){null!==e.state.tick&&e.state.manualPrevOrNextClick===!1&&(e.state.tick=e.state.tick+1),null===e.state.tick&&(e.state.tick=24),e.state.updateLock===!1&&(e.state.tick%24==0&&e.state.isPlaying===!0||e.state.manualPrevOrNextClick===!0)&&(e.state.updateLock=!0,e.state.currentFrame=e.state.currentFrame+t,(e.state.isPlaying||e.state.manualPrevOrNextClick===!0)&&(e.state.currentFrame>e.state.amountFrames&&(e.resetAllFrames(),e.state.previousFrame=null,e.state.currentFrame=1),e.state.currentFrame<1&&(e.state.currentFrame=e.state.amountFrames),e.config.frameAutoHide===!0&&e.animateSingleFrame(e.state.previousFrame,"hide"),e.animateSingleFrame(e.state.currentFrame,"show"),e.updateFrameLabel()),e.state.previousFrame=e.state.currentFrame,e.state.manualPrevOrNextClick=!1,e.state.updateLock=!1)}},{key:"fixTspanLeadingWhitespace",value:function(){for(var e=document.getElementsByTagName("tspan"),t=void 0,n=0,a=e.length;n<a;n++){t=e[n];var r=t.textContent;if(void 0!==r&&null!==r&&/^\s/.test(r)){var i=r.replace(/^(\s*).*$/,"$1"),l=parseInt(t.getAttribute("x"),10)+5*i.length;t.setAttribute("x",l),t.textContent=r.substring(i.length,r.length)}}}},{key:"getElementsStartsWithId",value:function(e){for(var t=document.getElementsByTagName("*"),n=[],a=void 0,r=0,i=t.length;r<i;r++)a=t[r],a.id.substr(0,e.length)==e&&n.push(a);return n}},{key:"getFrameIdByNumber",value:function(e){return e<10?"frame-0"+e:"frame-"+e}},{key:"animateSingleFrame",value:function(e,t){var n=this,a=document.getElementById(n.getFrameIdByNumber(e));null!==a&&(a.removeAttribute("class"),console.log(e,t),setTimeout(function(e,t){"show"===t?(e.setAttribute("class","showFrameAnimation"),e.style.opacity=1):(e.setAttribute("class","hideFrameAnimation"),e.style.opacity=0)},200,a,t))}},{key:"updateFrameLabel",value:function(){var e=this,t=document.getElementById("hg-frame");if(null!==t){t.querySelector("tspan").textContent=e.state.currentFrame}}},{key:"initializePrevNextButtons",value:function(){var e=this,t=document.getElementById("hg-next");null!==t&&(t.onclick=function(){e.state.manualPrevOrNextClick=!0,e.update(e,1)});var n=document.getElementById("hg-prev");null!==n&&(n.onclick=function(){e.state.manualPrevOrNextClick=!0,e.update(e,-1)})}},{key:"resetAllFrames",value:function(){var e=this,t=e.getElementsStartsWithId("frame-");if(void 0!==t&&null!==t&&t.length>0)for(var n=0;n<t.length;n++)t[n].removeAttribute("class"),t[n].removeAttribute("style")}},{key:"resetAnimationCompletely",value:function(){var e=this;e.resetAllFrames(),e.state=a({},e.initialState),e.preInitialize(),e.update(e,1)}},{key:"initializePlayPauseButtons",value:function(){var e=this,t=document.getElementById("hg-play");null!==t&&(t.onclick=function(){e.state.isPlaying=!0});var n=document.getElementById("hg-pause");null!==n&&(n.onclick=function(){e.state.isPlaying=!1});var a=document.getElementById("hg-restart");null!==a&&(a.onclick=function(){e.resetAnimationCompletely()})}},{key:"preInitialize",value:function(){var e=this,t=e.getElementsStartsWithId("frame-");void 0!==t&&null!==t&&t.length>0&&(e.state.amountFrames=t.length),e.state.overallAnimationDurationInSeconds=(e.config.frameAnimationDurationInSeconds+e.config.framePauseBetweenFramesInSeconds)*e.state.amountFrames}}]),Hirngespinst}();t.default=Hirngespinst,e.exports=t.default});