/*!
 * @license MIT
 * Copyright (c) 2017 Bernhard Gr√ºnewaldt
 * https://github.com/codeclou/hirngespinst
 */
!function(e,t){if("function"==typeof define&&define.amd)define(["module","exports"],t);else if("undefined"!=typeof exports)t(module,exports);else{var n={exports:{}};t(n,n.exports),e.hirngespinst=n.exports}}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),Hirngespinst=function(){function Hirngespinst(e){n(this,Hirngespinst);var t=this;t.state={amountFrames:0,loadingBarUpdateCount:0,loadingBarIntervalReference:null,overallAnimationDurationInSeconds:0};var i=a({},{frameAnimationDurationInSeconds:8,framePauseBetweenFramesInSeconds:1,frameAutoHide:!1},e);t.fixTspanLeadingWhitespace(),t.preInitialize(i),t.initialize(i),setInterval(t.initialize,1e3*t.state.overallAnimationDurationInSeconds,i)}return i(Hirngespinst,[{key:"initialize",value:function(e){var t=this;t.initializeFrameAnimations(e),t.initializeLoadingBarAnimation(e)}},{key:"fixTspanLeadingWhitespace",value:function(){for(var e=document.getElementsByTagName("tspan"),t=void 0,n=0,a=e.length;n<a;n++){t=e[n];var i=t.textContent;if(void 0!==i&&null!==i&&/^\s/.test(i)){var r=i.replace(/^(\s*).*$/,"$1"),o=parseInt(t.getAttribute("x"),10)+5*r.length;t.setAttribute("x",o),t.textContent=i.substring(r.length,i.length)}}}},{key:"getElementsStartsWithId",value:function(e){for(var t=document.getElementsByTagName("*"),n=[],a=void 0,i=0,r=t.length;i<r;i++)a=t[i],a.id.substr(0,e.length)==e&&n.push(a);return n}},{key:"getFrameIdByNumber",value:function(e){return e<10?"frame-0"+e:"frame-"+e}},{key:"initializeFrameAnimations",value:function(e){for(var t=this,n=1;n<t.state.amountFrames+1;n++){var a=document.getElementById(t.getFrameIdByNumber(n));a.removeAttribute("class"),a.removeAttribute("style");var i=(e.framePauseBetweenFramesInSeconds+e.frameAnimationDurationInSeconds)*(n-1);setTimeout(function(t,n,a){t.style["animation-delay"]=n+"s",t.style["animation-duration"]=a+"s",t.style.opacity=0;var i="showFrameAnimation";e.frameAutoHide&&(i="showFrameAndHideAnimation"),t.setAttribute("class",i)},300,a,i,e.frameAnimationDurationInSeconds)}}},{key:"initializeLoadingBarAnimation",value:function(e){var t=this,n=document.getElementById("hg-loading");if(null!==n){t.state.loadingBarUpdateCount=0,n.setAttribute("width","0%"),void 0!==t.state.loadingBarIntervalReference&&null!==t.state.loadingBarIntervalReference&&(clearInterval(t.state.loadingBarIntervalReference),t.state.loadingBarIntervalReference=null);var a=function(e){if(t.state.loadingBarUpdateCount<=t.state.overallAnimationDurationInSeconds){t.state.loadingBarUpdateCount=t.state.loadingBarUpdateCount+1;var a=t.state.loadingBarUpdateCount/t.state.overallAnimationDurationInSeconds*100;n.setAttribute("width",a+"%")}};t.state.loadingBarIntervalReference=setInterval(a,1e3,e)}}},{key:"preInitialize",value:function(e){var t=this,n=t.getElementsStartsWithId("frame-");void 0!==n&&null!==n&&n.length>0&&(t.state.amountFrames=n.length),t.state.overallAnimationDurationInSeconds=(e.frameAnimationDurationInSeconds+e.framePauseBetweenFramesInSeconds)*t.state.amountFrames}}]),Hirngespinst}();t.default=Hirngespinst,e.exports=t.default});